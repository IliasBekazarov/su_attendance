{% extends 'base.html' %}
{% block title %}–ú–µ–Ω–∏–Ω –±–æ—à–æ—Ç—É—É —Å—É—Ä–∞–º–¥–∞—Ä—ã–º{% endblock %}
{% block content %}
<div class="container mt-5">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2>üìã –ú–µ–Ω–∏–Ω –±–æ—à–æ—Ç—É—É —Å—É—Ä–∞–º–¥–∞—Ä—ã–º</h2>
        <a href="{% url 'submit_leave_request' %}" class="btn btn-primary">
            ‚ûï –ñ–∞“£—ã —Å—É—Ä–∞–º –∂”©–Ω”©—Ç“Ø“Ø
        </a>
    </div>
    
    {% if leave_requests %}
    <div class="table-responsive">
        <table class="table table-hover">
            <thead class="table-primary">
                <tr>
                    <th>–¢“Ø—Ä“Ø</th>
                    <th>–ú”©”©–Ω”©—Ç“Ø</th>
                    <th>–ö“Ø–Ω–¥”©—Ä–¥“Ø–Ω —Å–∞–Ω—ã</th>
                    <th>–°–µ–±–µ–±–∏</th>
                    <th>–°—Ç–∞—Ç—É—Å</th>
                    <th>–ñ”©–Ω”©—Ç“Ø–ª–≥”©–Ω –∫“Ø–Ω“Ø</th>
                </tr>
            </thead>
            <tbody>
                {% for request in leave_requests %}
                <tr>
                    <td>
                        <span class="badge bg-info">
                            {{ request.get_leave_type_display }}
                        </span>
                    </td>
                    <td>
                        <small class="text-muted">
                            {{ request.start_date }} –¥”©–Ω<br>
                            {{ request.end_date }} –≥–∞ —á–µ–π–∏–Ω
                        </small>
                    </td>
                    <td>
                        <strong>{{ request.duration }} –∫“Ø–Ω</strong>
                    </td>
                    <td>
                        <div style="max-width: 200px;">
                            {{ request.reason|truncatewords:10 }}
                        </div>
                    </td>
                    <td>
                        {% if request.status == 'PENDING' %}
                            <span class="badge bg-warning text-dark">‚è≥ –ö“Ø—Ç“Ø“Ø–¥”©</span>
                        {% elif request.status == 'APPROVED' %}
                            <span class="badge bg-success">‚úÖ –ë–µ–∫–∏—Ç–∏–ª–≥–µ–Ω</span>
                            {% if request.approved_by %}
                                <br><small class="text-muted">{{ request.approved_by.get_full_name|default:request.approved_by.username }}</small>
                            {% endif %}
                        {% else %}
                            <span class="badge bg-danger">‚ùå –ß–µ—Ç–∫–µ –∫–∞–≥—ã–ª–≥–∞–Ω</span>
                            {% if request.approved_by %}
                                <br><small class="text-muted">{{ request.approved_by.get_full_name|default:request.approved_by.username }}</small>
                            {% endif %}
                        {% endif %}
                    </td>
                    <td>
                        <small class="text-muted">
                            {{ request.created_at|date:"d.m.Y H:i" }}
                        </small>
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
    {% else %}
    <div class="card">
        <div class="card-body text-center py-5">
            <h5 class="text-muted">üìù –°–∏–∑–¥–µ –∞–∑—ã—Ä—ã–Ω—á–∞ –±–æ—à–æ—Ç—É—É —Å—É—Ä–∞–º–¥–∞—Ä—ã –∂–æ–∫</h5>
            <p class="text-muted">–ñ–∞“£—ã —Å—É—Ä–∞–º –∂”©–Ω”©—Ç“Ø“Ø “Ø—á“Ø–Ω –∂–æ–≥–æ—Ä—É–¥–∞–≥—ã –±–∞—Å–∫—ã—á—Ç—ã –±–∞—Å—ã“£—ã–∑</p>
            <a href="{% url 'submit_leave_request' %}" class="btn btn-primary">
                ‚ûï –ë–∏—Ä–∏–Ω—á–∏ —Å—É—Ä–∞–º –∂”©–Ω”©—Ç“Ø“Ø
            </a>
        </div>
    </div>
    {% endif %}
</div>

<style>
.table th {
    border-top: none;
    font-weight: 600;
}
.badge {
    font-size: 0.875rem;
}
</style>
{% endblock %}
